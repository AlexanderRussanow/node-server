<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <title>post
   </title>
   <link rel="preconnect" href="https://fonts.gstatic.com">
   <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
   <style>
      body {
         display: flex;
         min-height: 100vh;
         align-items: center;
         justify-content: center;
         flex-direction: column;
         font-family: 'Roboto', sans-serif;
         font-size: 20px;
         background: linear-gradient(to right, #a19a4f, #e62e8d);
         color: #fff;
      }

      nav {
         position: absolute;
         top: 0;
         left: 0;
         right: 0;
         min-height: 50px;
         display: flex;
         justify-content: flex-start;
         background-color: #FFFFFF;
      }

      nav ul {
         margin: 0;
         padding: 0;
         display: flex;
      }

      nav li {
         list-style: none;
      }

      nav a {
         text-decoration: none;
         color: black;
         min-height: 60px;
         display: block;
         padding: 10px 20px;
         line-height: 60px;
      }
   </style>
</head>

<body>
   <%- include('./../views/common/navbar.ejs') %>
      <h1>Post</h1>
      <p>Very interesting...ðŸ•¶</p>

      <article>
         <div class="info">
            <span>
               <%= post.createdAt.toLocaleDateString() %>
            </span>
            <span>
               <%= post.author %>
            </span>
         </div>
         <h1>
            <%= post.title %>
         </h1>
         <p>
            <%= post.content %>
         </p>
         <a href="/edit/<%= post.id %>" class="btn-edit">
            <i class="fas fa-edit"></i>
          </a>
         <button class="btn-delete" data-id="<%= post.id %>">
            <i class="fas fa-trash-alt" data-id="<%= post.id %>"></i>
         </button>
      </article>

      <script>
         document.addEventListener('click', (e) => {
            const id = e.target?.dataset?.id || null;
            if (id) {
               fetch(`/post/${id}`, {
                  method: 'DELETE',
               }).then(() => {
                  window.location.href = '/posts';
               });
            }
         });
      </script>

</body>

</html>